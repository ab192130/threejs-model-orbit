<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>PROJ02</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
<!-- Container -->
<div class="container"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r126/three.min.js" integrity="sha512-n8IpKWzDnBOcBhRlHirMZOUvEq2bLRMuJGjuVqbzUJwtTsgwOgK5aS0c1JA647XWYfqvXve8k3PtZdzpipFjgg==" crossorigin="anonymous"></script>
<script src="https://unpkg.com/three@0.126.0/examples/js/loaders/GLTFLoader.js"></script>
<!--<script src="https://cdn.jsdelivr.net/npm/three@0.121.1/examples/jsm/controls/OrbitControls.js"></script>-->
<script type="module">
    import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.121.1/examples/jsm/controls/OrbitControls.js'

    let scene;
    let camera;
    let renderer;

    function init() {
        let container = document.querySelector('.container');

        // Scene
        scene = new THREE.Scene();
        scene.background = new THREE.Color(0xFFFFFF);

        // Camera
        camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 3000);
        camera.position.z = 500;

        // Render
        renderer = new THREE.WebGLRenderer({antialias: true});
        renderer.setSize(window.innerWidth, window.innerHeight);
        container.appendChild(renderer.domElement);

        // Orbit Control
        const controls = new OrbitControls(camera, renderer.domElement);
        controls.update();
        controls.enableDamping = true;
        controls.minDistance = 40;

        // Light
        const ambient = new THREE.AmbientLight(0xFFFFFF, 1);
        scene.add(ambient);

        let light = new THREE.PointLight(0xc4c4c4, 1);
        light.position.set(0, 300, 500);
        scene.add(light);

        let light2 = new THREE.PointLight(0xc4c4c4, 1);
        light2.position.set(500, 300, 500);
        scene.add(light2);

        // Model
        const loader = new THREE.GLTFLoader();
        loader.load('./model/scene.gltf', gltf => {
            scene.add(gltf.scene);
        }, function (error) {
            console.log('Error:' + error);
        });

        window.addEventListener('resize', onResize, false)

        function onResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();

            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }

        animate();
    }

    init();
</script>
</body>
</html>